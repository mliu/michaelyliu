/*! ko-validation - v1.1.2 - 2014-05-19 */
var ko;ko=ko||{},ko.func=ko.func||{},ko.func.operators=ko.func.operators||{},ko.validation=ko.validation||{},ko.validators=ko.validators||{},ko.validators.results=ko.validators.results||{},ko.validators.customValidator=function(a,b){return{validate:a.bind(b)}},ko.validators.validatorWithMessage=function(a,b){return ko.validators.customValidator(ko.validators.utilities.validateWithMessage(a,b))},ko.validators.dependentFieldNumericValidator=function(a,b,c){var d=ko.validators.utilities;return ko.validators.validatorWithMessage(function(c){var e,f,g;return e=d.getValueByElementId(a),d.isInteger(e)?(f=parseInt(c,10),g=parseInt(e,10),d.isInteger(c)&&b(g)(f)):!0},c)},ko.validators.lessThanOrEqualToFieldValueValidator=function(a,b){return ko.validators.dependentFieldNumericValidator(a,ko.func.operators.lessThanOrEqualTo,b)},ko.validators.greaterThanOrEqualToFieldValueValidator=function(a,b){return ko.validators.dependentFieldNumericValidator(a,ko.func.operators.greaterThanOrEqualTo,b)},ko.validators.emailValidator=function(a){return ko.validators.regexValidator(/^[+a-zA-Z0-9_.\-]+@([a-zA-Z0-9\-]+\.)+[a-zA-Z0-9]{2,}$/,a)},ko.validators.equalToFieldValueValidator=function(a,b){var c=ko.validators.utilities;return ko.validators.validatorWithMessage(function(b){return b===c.getValueByElementId(a)},b)},ko.validators.integerValidator=function(a){return ko.validators.validatorWithMessage(ko.validators.utilities.isInteger,a)},ko.validators.integerValueValidator=function(a,b){return ko.validators.validatorWithMessage(function(b){return ko.validators.utilities.isDefinedAndNotNull(b)?ko.validators.utilities.isInteger(b)&&a(parseInt(b,10)):!0},b)},ko.validators.rangeValidator=function(a,b,c){return ko.validators.integerValueValidator(ko.func.operators.range(a,b),c)},ko.validators.invalidCharsValidator=function(a,b){return ko.validators.validatorWithMessage(function(b){var c=b.toString();return!ko.utils.arrayFirst(a,function(a){return c.indexOf(a)>=0})},b)},ko.validators.lengthValidator=function(a,b){return ko.validators.validatorWithMessage(function(b){return ko.validators.utilities.isDefinedAndNotNull(b)?a(b.toString().trim().length):!0},b)},ko.validators.maxLengthValidator=function(a,b){return ko.validators.lengthValidator(ko.func.operators.lessThanOrEqualTo(a),b)},ko.validators.onlyIfValidator=function(a,b){function c(a){var b=Object.keys(a)[0];return ko.validation.utils.createValidator(b,a[b])}var d=ko.validators.utilities;return d.isFunction(b.validate)||(b=c(b)),{validate:function(c){return a()?b.validate(c):ko.validators.results.valid()}}},ko.validators.regexValidator=function(a,b){return ko.validators.validatorWithMessage(a.test.bind(a),b)},ko.validators.requiredValidator=function(a){var b=ko.validators.utilities;return ko.validators.validatorWithMessage(function(a){return b.isArray(a)?a.length>0:b.isNumber(a)?!0:!!a},a)},ko.validators.results.result=function(a,b){return{isValid:a,message:b}},ko.validators.results.valid=ko.validators.results.result.bind(null,!0),ko.validators.results.invalid=ko.validators.results.result.bind(null,!1),ko.validators.utilities=function(){function a(a){return a.selectedIndex>=0?a.options[a.selectedIndex].value:null}function b(a){var b;return b=ko.utils.arrayFilter(a.options,function(a){return a.selected}),b=ko.utils.arrayMap(b,function(a){return a.value}),b.length?b:null}var c={};return c.isArray=function(a){return a?Array.isArray(a)||"object"==typeof a&&"number"==typeof a.length:!1},c.isBoolean=function(a){return"boolean"==typeof a},c.isString=function(a){return"string"==typeof a},c.isNumber=function(a){return!c.isEmptyString(a)&&isFinite(a)&&a!==!1},c.isInteger=function(a){return c.isNumber(a)&&a%1===0},c.isEmptyString=function(a){return/^[\s\xa0]*$/.test(null===a?"":String(a))},c.isFunction=function(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)},c.isDefinedAndNotNull=function(a){return void 0!==a&&null!==a},c.identity=function(a){return a},c.getValue=function(c){var d=c.type;if(!d||!d.toLowerCase)return null;switch(d.toLowerCase()){case"checkbox":case"radio":return c.checked?c.value:null;case"select-one":return a(c);case"select-multiple":return b(c);case"hidden":return c.value||null;default:return void 0!==c.value?c.value:""}},c.getValueByElementId=function(a){return c.getValue(document.getElementById(a))},c.objectForEach=ko.utils.objectForEach,c.makeFunction=function(a){return c.isFunction(a)?a:c.identity.bind(c,a)},c.validateWithMessage=function(a,b){var d=c.makeFunction(b);return function(b){var c=!!a(b);return{isValid:c,message:c?void 0:d(b)}}},c}(),ko.func.operators=function(){var a={};return a.strictEquals=function(a){return function(b){return b===a}},a.greaterThan=function(a){return function(b){return b>a}},a.greaterThanOrEqualTo=function(a){return function(b){return b>=a}},a.lessThan=function(a){return function(b){return a>b}},a.lessThanOrEqualTo=function(a){return function(b){return a>=b}},a.range=function(b,c){return function(d){return a.greaterThanOrEqualTo(b)(d)&&a.lessThanOrEqualTo(c)(d)}},a}(),ko.validation.validationStates={PRISTINE:"pristine",INVALID:"invalid",VALID:"valid",FIXED:"fixed"},ko.validation.registeredValidators={},ko.validation.utils=function(){var a={};return a.validatesOtherObservable=function(a){return!!a.__validates__},a.hasValidators=function(a){return a.__validators__&&a.validationState},a.createValidator=function(a,b){var c=ko.validation.registeredValidators[a];if("function"!=typeof c)throw new Error(['Cannot create validator with name "',a,'". Validator class is ',c||"not registered."].join(""));return c.apply(this,b)},a.runValidations=function(b){if(a.hasValidators(b)){var c,d,e,f;for(c=0;c<b.__validators__.length;c++)if(d=b.__validators__[c],e=d.validate(b()),!e.isValid)return b.validationMessage(e.message||""),void b.validationState(ko.validation.validationStates.INVALID);f=b.validationState(),f!==ko.validation.validationStates.VALID&&(b.validationMessage(""),b.validationState(f===ko.validation.validationStates.INVALID?ko.validation.validationStates.FIXED:ko.validation.validationStates.VALID))}},a.addValidateToViewModel=function(b){b&&(b.validate=b.validate||function(){var c,d,e;e=!0;for(c in b)b.hasOwnProperty(c)&&(d=b[c],a.hasValidators(d)&&(a.runValidations(d),e=d.isValid()&&e));return e})},a}(),ko.validation.registerValidator=function(a,b){ko.validation.registeredValidators[a]=b,ko.extenders[a]=function(b,c){var d,e;return d=!b.__validators__,d&&(b.__validators__=[],b.validationState=ko.observable(ko.validation.validationStates.PRISTINE).extend({notify:"always"}),b.validationMessage=ko.observable(""),b.validate=function(){ko.validation.utils.runValidations(b)},b.isValid=ko.computed(function(){return b.validationState()!==ko.validation.validationStates.INVALID}),b.subscribe(function(){ko.validation.utils.runValidations(b)})),e=ko.validation.utils.createValidator(a,c),b.__validators__.push(e),b}},function(){function a(a){var b=a.querySelector(".validation-message");return b||(b=document.createElement("SPAN"),b.className="validation-message",b.style.display="none",a.appendChild(b)),b}function b(a,b){ko.bindingHandlers.visible.update(a,function(){return b.validationState()!==ko.validation.validationStates.PRISTINE}),ko.bindingHandlers.css.update(a,function(){return{"validation-error":b.validationState()===ko.validation.validationStates.INVALID,"validation-fixed":b.validationState()===ko.validation.validationStates.FIXED}}),ko.bindingHandlers.text.update(a,b.validationMessage),ko.bindingHandlers.css.update(a.parentNode,function(){return{error:b.validationState()===ko.validation.validationStates.INVALID}})}function c(c,d){var e=d.validationState.subscribe(function(){if(d.__hasCustomValidationElement__)return void e.dispose();var f=a(c.parentNode);b(f,d)});ko.utils.domNodeDisposal.addDisposeCallback(c,function(){e.dispose()})}function d(a){var b=ko.bindingHandlers[a].init;ko.bindingHandlers[a].init=function(a,d,e,f,g){var h,i;return h=d(),i=b(a,d,e,f,g),ko.isObservable(h)&&(ko.validation.utils.hasValidators(h)&&c(a,h),ko.validation.utils.validatesOtherObservable(h)&&ko.utils.arrayForEach(h.__validates__,function(b){c(a,b)}),ko.validation.utils.addValidateToViewModel(f)),i}}ko.extenders.validatesAfter=function(a,b){return ko.utils.arrayForEach(b,function(b){if(!ko.isObservable(b))throw new Error('Invalid observable specified for "validatesAfter"');b.__validates__=b.__validates__||[],b.__validates__.push(a)}),a},ko.extenders.validates=function(a,b){return ko.utils.arrayForEach(b,function(b){a.subscribe(function(){ko.validation.utils.runValidations(b)})}),a},ko.bindingHandlers.validationMessage={init:function(a,c){var d=c();if(!ko.validation.utils.hasValidators(d))throw new Error("'validationMessage' should be used with an observable that has validation");d.__hasCustomValidationElement__=!0,ko.bindingHandlers.css.update(a,function(){return{"validation-message":!0}}),d.validationState.subscribe(function(){b(a,d)})}},d("value"),d("checked")}(),function(){ko.validation.registerValidator("required",ko.validators.requiredValidator),ko.validation.registerValidator("maxLength",ko.validators.maxLengthValidator),ko.validation.registerValidator("custom",ko.validators.customValidator),ko.validation.registerValidator("integer",ko.validators.integerValidator),ko.validation.registerValidator("range",ko.validators.rangeValidator),ko.validation.registerValidator("regex",ko.validators.regexValidator),ko.validation.registerValidator("email",ko.validators.emailValidator),ko.validation.registerValidator("invalidChars",ko.validators.invalidCharsValidator),ko.validation.registerValidator("onlyIf",ko.validators.onlyIfValidator),ko.validation.registerValidator("equalToFieldValue",ko.validators.equalToFieldValueValidator),ko.validation.registerValidator("greaterThanOrEqualToFieldValue",ko.validators.greaterThanOrEqualToFieldValueValidator),ko.validation.registerValidator("lessThanOrEqualToFieldValue",ko.validators.lessThanOrEqualToFieldValueValidator)}();