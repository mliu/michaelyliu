!function(){"use strict";function t(){h=$("#canvas"),window.onresize();for(var t=u;t--;)p.push(n());setInterval(e,d)}function a(t){if(t.el)t.el.css({top:t.y,left:t.x,opacity:t.opacity});else{var a=$(document.createElement("lightball")),n="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+")";a.css({backgroundColor:n,opacity:t.opacity,width:t.r,height:t.r,top:t.y,left:t.x}),o().appendChild(a.get()[0]),t.el=a}}function n(){var t={},a=h.width(),n=h.height();switch(t.r=m+Math.round(Math.random()*s),t.opacity=v+Math.round(Math.random()*f)/100,Math.round(3*Math.random())){case 0:t.x=Math.random()*a,t.y=-2*t.r,t.vx=Math.random()*M-M/2,t.vy=Math.random()*M;break;case 1:t.x=Math.random()*a,t.y=n,t.vx=Math.random()*M-M/2,t.vy=-Math.random()*M;break;case 2:t.x=a,t.y=Math.random()*n,t.vx=-Math.random()*M,t.vy=Math.random()*M-M/2;break;case 3:t.x=-2*t.r,t.y=Math.random()*n,t.vx=Math.random()*M,t.vy=Math.random()*M-M/2}return t}function o(){return h.get()[0]}function r(t){return t.x+2*t.r<0||t.x>h.width()||t.y+2*t.r<0||t.y>h.height()}function e(){for(var t,e=p.length;e--;)t=p[e],a(t),t.x+=t.vx,t.y+=t.vy,r(t)&&(o().removeChild(t.el.get()[0]),p[e]=n());for(e=0;e<x.length;)t=x[e],null!==t.el?(a(t),t.x+=t.vx,t.y+=t.vy,t.opacity-=g,t.opacity<=0?(x.splice(e,1),o().removeChild(t.el.get()[0])):e++):x.splice(e,1);if(null!==i&&$.now()-i>c)w=0,x=x.concat(p.splice(0,Math.round(p.length/5)));else if(w++,w>=l&&p.length<u)for(w=0,e=y;e--;)p.push(n());i=$.now()}var h,i,d=33,c=66,l=25,u=25,y=5,M=5,m=10,s=100,v=.1,f=50,g=.02,p=[],x=[],w=0;$(document).ready(function(){t()}),window.onresize=function(){h.width(document.body.clientWidth),h.height(window.innerHeight)}}();